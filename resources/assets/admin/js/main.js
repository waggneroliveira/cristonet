function showSuccessMessage(){var e=document.getElementById("successMessage");e&&(e.style.opacity="1",e.style.transition="opacity 0.5s ease",setTimeout((function(){e.style.opacity="0"}),3e3))}$(".btSubmitDeleteItem").on("click",(function(e){e.preventDefault();var t=$(this);Swal.fire({title:`${responseAreYouSure}`,text:`${responseTextSweetAlert}`,icon:"warning",showCancelButton:!0,confirmButtonText:`${responseConfirmAction}`,cancelButtonText:`${responseCancelAction}`,confirmButtonClass:"btn btn-success mt-2",cancelButtonClass:"btn btn-danger ms-2 mt-2",buttonsStyling:!1}).then((function(e){e.value&&(window.onload=function(){Swal.fire({title:`${responseDeleted}`,text:`${responseItemDelete}`,icon:"success",showConfirmButton:!1})},setTimeout((()=>{t.parents("form").submit()}),1e3))}))})),window.onload=function(){showSuccessMessage()},$.each($(".modal"),(function(e,t){$(this).find(".modal").length&&$(this).find(".modal").appendTo("body")}));const channelSelect=document.querySelectorAll(".channel-select");function deleteChannelHandler(e){e.target.parentNode.parentNode.removeChild(e.target.parentNode)}channelSelect&&channelSelect.forEach((e=>{const t=e.parentNode.querySelector(".channels");e.addEventListener("change",(e=>{const n=e.target.value,a=e.target.querySelector(`option[value="${n}"]`).innerText;t.querySelector(`[value="${n}"]`)||(t.innerHTML+=` <label class="btn btn-light btn-xs waves-effect waves-light">${a} <i class="mdi mdi-close" onclick="deleteChannelHandler(event)"></i>\n                 <input type="hidden" value='${n}' name="channels_id[]" required></label>`)}))}));const userSelect=document.querySelectorAll(".user-select");function deleteUserHandler(e){e.target.parentNode.parentNode.removeChild(e.target.parentNode)}function marcarComoLida(e){fetch(`/painel/auditorias/${e}/mark-as-read`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((t=>{if("success"===t.status){const t=document.getElementById(`notificacao-${e}`);if(t){t.remove();const e=document.querySelector(".noti-icon-badge");let n=parseInt(e.innerText);e.innerText=n>0?n-1:0}}})).catch((e=>console.error("Erro:",e)))}userSelect&&userSelect.forEach((e=>{const t=e.parentNode.querySelector(".users");e.addEventListener("change",(e=>{const n=e.target.value,a=e.target.querySelector(`option[value="${n}"]`).innerText;t.querySelector(`[value="${n}"]`)||(t.innerHTML+=` <label class="btn btn-light btn-xs waves-effect waves-light">${a} <i class="mdi mdi-close" onclick="deleteUserHandler(event)"></i>\n                 <input type="hidden" value='${n}' name="users_id[]"></label>`)}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("shown.bs.modal",(function(){const t=e.querySelector("textarea");t&&!CKEDITOR.instances[t.id]&&CKEDITOR.replace(t.id,{allowedContent:!1,toolbar:[{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar"]},{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize"]}],height:260})}))}))})),$("body").on("click",".dropify-clear",(function(){var e=$(this).parent().find("input:first").attr("name");$(this).parent().find(`input[name=delete_${e}]`).remove(),$(this).parent().find(".preview-image").css("background-image","url()"),$(this).parent().find(".content-area-image-crop").show(),$(this).parent().append(`<input type="hidden" name="delete_${e}" value="${e}" />`)})),$(".table-sortable tbody").sortable({handle:".btnDrag"}).on("sortupdate",(function(e,t){var n=[];$(this).find("tr").each((function(){var e=$(this).data("code");n.push(e)})),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:$(this).data("route"),data:{arrId:n},success:function(e){e.status?Swal.fire({title:`${responseSuccessName}`,text:`${responseItemOrderSuccess}`,icon:"success",confirmButtonText:"OK"}):Swal.fire({title:`${responseItemErrorName}`,text:`${responseItemOrderError}`,icon:"error",confirmButtonText:"OK"})},error:function(){Swal.fire({title:`${responseItemErrorName}`,text:`${responseItemOrderError}`,icon:"error",confirmButtonText:"OK"})}})})),$("input[name=btnSelectItem]").on("click",(function(){var e=$(this).closest("table").find("input[name=btnSelectAll]").val(),t=$(this).closest("table");t.find(".btnSelectItem:checked").length?t.find(".btnSelectItem:checked").length>1?(t.find("input[name=btnSelectAll]").prop("checked",!0),$(`.${e}`).fadeIn("fast"),$(".btSubmitDelete").show()):(t.find("input[name=btnSelectAll]").prop("checked",!1),$(".btSubmitDelete").hide()):($(`.${e}`).fadeOut("fast"),$(".btSubmitDelete").hide())})),$("input[name=btnSelectAll]").on("click",(function(){var e=$(this).val(),t=$(this).closest("table"),n=$(".btSubmitDelete");t.find(".btnSelectItem:checked").length===t.find(".btnSelectItem").length?($(`.${e}`).fadeOut("fast"),n.hide()):(t.find("input[name=btnSelectAll]").prop("checked",!0),$(`.${e}`).fadeIn("fast"),n.show());var a=$(this).is(":checked");t.find(".btnSelectItem").each((function(){$(this).prop("checked",a)}))})),$(".btConfirmDelete, #btSubmitDelete").on("click",(function(){var e=$(this),t=[];$(".btnSelectItem:checked").each((function(){t.push($(this).val())})),Swal.fire({title:`${responseAreYouSure}`,text:`${responseTextSweetAlert}`,icon:"warning",showCancelButton:!0,confirmButtonText:`${responseConfirmAction}`,cancelButtonText:`${responseCancelAction}`,confirmButtonClass:"btn btn-success mt-2",cancelButtonClass:"btn btn-danger ms-2 mt-2",buttonsStyling:!1}).then((function(n){n.value&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:e.data("route"),data:{deleteAll:t},dataType:"JSON",success:function(e){if("success"===e.status)Swal.fire({title:`${responseDeleted}`,text:e.message,icon:"success",showConfirmButton:!1}),setTimeout((()=>{window.location.href=window.location.href}),1e3);else Swal.fire({title:"Erro!",text:e.message,icon:"error",confirmButtonColor:"#4a4fea"})}})}))})),$("#settingTheme input[type=radio]").on("click",(function(){setTimeout((()=>{var e=new FormData,t=$(this).parents("form").attr("action");e.append("user_id",$(this).parents("form").find("[name=user_id]").val()),e.append("data_bs_theme",$(this).parents("form").find("[name=data-bs-theme]:checked").val()),e.append("data_layout_width",$(this).parents("form").find("[name=data-layout-width]:checked").val()),e.append("data_layout_mode",$(this).parents("form").find("[name=data-layout-mode]:checked").val()),e.append("data_topbar_color",$(this).parents("form").find("[name=data-topbar-color]:checked").val()),e.append("data_menu_color",$(this).parents("form").find("[name=data-menu-color]:checked").val()),e.append("data_two_column_color",$(this).parents("form").find("[name=data-two-column-color]:checked").val()),e.append("data_menu_icon",$(this).parents("form").find("[name=data-menu-icon]:checked").val()),e.append("data_sidenav_size",$(this).parents("form").find("[name=data-sidenav-size]:checked").val()),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:t,data:e,processData:!1,contentType:!1}),console.log(t)}),800)})),$("#light-dark-mode").on("click",(function(){var e=$(this).find("form"),t="light"===e.find('input[name="data-bs-theme"]').val()?"dark":"light";e.find('input[name="data-bs-theme"]').val(t);var n=e.find('input[name="user_id"]').val(),a=new FormData(e[0]);a.set("user_id",n),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:e.attr("action"),data:a,processData:!1,contentType:!1,success:function(e){e.status?console.log(`${responseItemThemeSuccess}`):console.log(`${responseItemThemeError}`)},error:function(e,t,n){console.error(`${responseItemThemeError}:`,n)}})})),$(document).ready((function(){userThemeSettings&&(document.documentElement.setAttribute("data-bs-theme",userThemeSettings.data_bs_theme),document.documentElement.setAttribute("data-layout-width",userThemeSettings.data_layout_width),document.documentElement.setAttribute("data-layout-mode",userThemeSettings.data_layout_mode),document.documentElement.setAttribute("data-two-column-color",userThemeSettings.data_two_column_color),document.documentElement.setAttribute("data-menu-icon",userThemeSettings.data_menu_icon),document.documentElement.setAttribute("data-sidenav-size",userThemeSettings.data_sidenav_size),setTimeout((function(){document.documentElement.setAttribute("data-topbar-color",userThemeSettings.data_topbar_color),document.documentElement.setAttribute("data-menu-color",userThemeSettings.data_menu_color)}),500))})),document.getElementById("clear-all-notifications")&&document.getElementById("clear-all-notifications").addEventListener("click",(function(){Swal.fire({title:"Você tem certeza?",text:"Deseja marcar todas as notificações como lidas?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, marcar como lidas!",cancelButtonText:"Não, cancelar!"}).then((e=>{e.isConfirmed&&fetch("/painel/auditorias/mark-all-as-read",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((e=>{if("success"===e.status){document.querySelectorAll(".notify-item").forEach((e=>{e.classList.remove("unread-noti")}));document.querySelector(".noti-icon-badge").innerText="0",Swal.fire("Marcou como lidas!","Todas as notificações foram marcadas como lidas.","success"),setTimeout((function(){location.reload()}),1500)}})).catch((e=>console.error("Erro:",e)))}))})),$("#testSmtp").on("click",(function(e){e.preventDefault();var t=$(this).attr("href");$.ajax({headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"},type:"POST",url:t,processData:!1,contentType:!1,success:function(e){switch(e.status){case"success":$(".detailsTestSmtp").append(`<span class="badge bg-success mt-2">${e.message}</span>`);break;case"error":$(".detailsTestSmtp").append(`\n                        <span class="badge bg-danger my-2">${e.message}</span>\n                        <p><b>${connectionReasonMessage}</b></p>\n                        <p>${e.details}</p>\n                    `)}},error:function(e){}})})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".price-mask").forEach((e=>{e.addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>12&&(t=t.slice(0,12));const n=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t/100);e.target.value=n}));let t=e.value.replace(/\D/g,"");t&&(e.value=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t/100))}))}));